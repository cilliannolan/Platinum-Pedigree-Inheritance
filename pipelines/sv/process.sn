CALLER = ["pbsv", "sniffles", "sawfish"]

def _get_vcf(wildcards):
    return config["samples"][wildcards.caller]

rule collect:
    input: expand("{caller}.filt.vcf", caller=CALLER)

rule filter:
    input: _get_vcf
    output: "{caller}.filt.vcf"
    shell: """
        bcftools annotate -x INFO,FORMAT/AD,FORMAT/DP {input} | bcftools view -i '(ILEN < -49 || ILEN > 50)' - > {output}
    """

